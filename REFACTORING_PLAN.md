# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

**–î–∞—Ç–∞:** 2026-01-27  
**–û—Å–Ω–æ–≤–∞–Ω –Ω–∞:** AUDIT_DRAFT.md

---

## üéØ –¶–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

1. –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏–∑ code review
2. –£–ª—É—á—à–∏—Ç—å –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞
3. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
4. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üìã –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –≠—Ç–∞–ø 1: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç (HIGH Priority)

**–ó–∞–¥–∞—á–∞:** –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ magic numbers –≤ `graph.astro` –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `GRAPH_CONSTANTS`

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/pages/[lang]/graph.astro` (—Å—Ç—Ä–æ–∫–∏: 499, 762, 945, 977, 999, 1009, 1033)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `src/utils/graph-constants.ts`:
   - `ZOOM_FIT_DELAY_MS: 100` (—É–∂–µ –µ—Å—Ç—å)
   - `STABILIZATION_DELAY_MS: 100` (–¥–ª—è —Å—Ç—Ä–æ–∫–∏ 762)
   - `POSITION_SAVE_DELAY_MS: 2000` (—É–∂–µ –µ—Å—Ç—å –∫–∞–∫ `SAVE_POSITIONS_DELAY_MS`)
   - `POSITION_SAVE_CHECK_INTERVAL_MS: 5000` (—É–∂–µ –µ—Å—Ç—å –∫–∞–∫ `SAVE_POSITIONS_CHECK_INTERVAL_MS`)
   - `ZOOM_TO_FIT_FALLBACK_DELAY_MS: 100` (–¥–ª—è —Å—Ç—Ä–æ–∫–∏ 1033)

2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
   - –°—Ç—Ä–æ–∫–∞ 499: `setTimeout(..., 150)` ‚Üí `GRAPH_CONSTANTS.DEBOUNCE_FILTER_MS`
   - –°—Ç—Ä–æ–∫–∞ 762: `setTimeout(..., 100)` ‚Üí `GRAPH_CONSTANTS.ZOOM_FIT_DELAY_MS`
   - –°—Ç—Ä–æ–∫–∞ 945: `setTimeout(..., 100)` ‚Üí `GRAPH_CONSTANTS.ZOOM_FIT_DELAY_MS`
   - –°—Ç—Ä–æ–∫–∞ 977: `setTimeout(..., 100)` ‚Üí `GRAPH_CONSTANTS.ZOOM_FIT_DELAY_MS`
   - –°—Ç—Ä–æ–∫–∞ 999: `setTimeout(..., 2000)` ‚Üí `GRAPH_CONSTANTS.SAVE_POSITIONS_DELAY_MS`
   - –°—Ç—Ä–æ–∫–∞ 1009: `setInterval(..., 5000)` ‚Üí `GRAPH_CONSTANTS.SAVE_POSITIONS_CHECK_INTERVAL_MS`
   - –°—Ç—Ä–æ–∫–∞ 1033: `setTimeout(..., 100)` ‚Üí `GRAPH_CONSTANTS.ZOOM_FIT_DELAY_MS`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ magic numbers –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

---

### –≠—Ç–∞–ø 2: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è innerHTML (HIGH Priority)

**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `innerHTML`

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/components/Backlinks.astro` (—Å—Ç—Ä–æ–∫–∏: 41, 84, 103, 158)
- `src/components/Recommendations.astro` (—Å—Ç—Ä–æ–∫–∏: 48, 65, 72, 102, 114, 132)
- `src/components/Analytics.astro` (—Å—Ç—Ä–æ–∫–∏: 32, 48)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `innerHTML` –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
   ```typescript
   // ‚ö†Ô∏è –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨: innerHTML –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ (–±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞)
   // escapeHtml() –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –∫–æ–Ω—Ç–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∞—Ç–∏—á–µ–Ω –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º
   // –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å escapeHtml()
   this.innerHTML = '...';
   ```

2. –î–ª—è `Analytics.astro` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `innerHTML` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

### –≠—Ç–∞–ø 3: –ê–Ω–∞–ª–∏–∑ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ graph.astro (MEDIUM Priority)

**–ó–∞–¥–∞—á–∞:** –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –µ—â—ë –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –∏–∑ `graph.astro` –≤ –º–æ–¥—É–ª–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –§–∞–π–ª: 1898 —Å—Ç—Ä–æ–∫
- –£–∂–µ –≤—ã–Ω–µ—Å–µ–Ω–æ –≤ –º–æ–¥—É–ª–∏:
  - `graph-filters.ts` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
  - `graph-highlight.ts` - –ø–æ–¥—Å–≤–µ—Ç–∫–∞
  - `graph-export.ts` - —ç–∫—Å–ø–æ—Ä—Ç
  - `graph-zoom.ts` - –∑—É–º
  - `graph-context-menu.ts` - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
  - `graph-utils.ts` - —É—Ç–∏–ª–∏—Ç—ã
  - `graph-positions.ts` - –ø–æ–∑–∏—Ü–∏–∏
  - `graph-event-handlers.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
  - `graph-state.ts` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  - `graph-cache.ts` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
  - `graph-helpers.ts` - —Ö–µ–ª–ø–µ—Ä—ã
  - `graph-constants.ts` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –≤ graph.astro:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥—Ä–∞—Ñ–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —É–∑–ª–æ–≤/—Ä—ë–±–µ—Ä
- –ü–æ–∏—Å–∫ —É–∑–ª–æ–≤
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥—Ä–∞—Ñ—É
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã–Ω–µ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥—Ä–∞—Ñ–∞ –≤ `graph-renderer.ts` (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- –í—ã–Ω–µ—Å—Ç–∏ –ø–æ–∏—Å–∫ –≤ `graph-search.ts` (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
- –í—ã–Ω–µ—Å—Ç–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

1. ‚úÖ –í—Å–µ magic numbers –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
2. ‚úÖ –í—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `innerHTML` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
3. ‚úÖ –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ `codereviewrule.mdc`
4. ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (—Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫)

---

## üìù –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–≠—Ç–∞–ø 1** - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ)
2. **–≠—Ç–∞–ø 2** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è innerHTML (–∫—Ä–∏—Ç–∏—á–Ω–æ)
3. **–≠—Ç–∞–ø 3** - –ê–Ω–∞–ª–∏–∑ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç
- –ù–µ —É–¥–∞–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
