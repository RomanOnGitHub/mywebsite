# Анализ перспективных решений для графа знаний

## Найденные фичи из примеров

### 1. История навигации (ExcaliBrain)
**Файл:** `excalibrain-master/src/Components/NavigationHistory.ts`

**Что делает:**
- Сохраняет историю посещённых узлов (до 50 записей)
- Кнопки "Назад" и "Вперёд" для навигации
- Автоматическое обновление состояния кнопок

**Применимость:** ✅ Высокая
- Улучшает UX при исследовании графа
- Простая реализация
- Работает с существующей системой кликов по узлам

**Реализация:**
```typescript
class NavigationHistory {
  private history: string[] = [];
  private currentPosition: number = -1;
  
  addToHistory(nodeId: string) {
    // Добавить в историю, убрать дубликаты
  }
  
  getPrevious(): string | null {
    // Вернуть предыдущий узел
  }
  
  getNext(): string | null {
    // Вернуть следующий узел
  }
}
```

---

### 2. Мультиселект фильтр по тегам и типам связей (ExcaliBrain)
**Файл:** `excalibrain-master/src/Components/LinkTagFilter.ts`

**Что делает:**
- Фильтрация по тегам узлов
- Фильтрация по типам связей (explicit, outbound, inferred)
- Мультиселект с поиском
- Автоматическое обновление графа при изменении фильтров

**Применимость:** ✅ Высокая
- У нас уже есть фильтры по типу и тегам, но они раздельные
- Мультиселект улучшит UX
- Можно добавить фильтрацию по типам связей

**Реализация:**
- Использовать существующий компонент или библиотеку для мультиселекта
- Объединить фильтры по типу, тегам и типам связей в один компонент

---

### 3. Режим фокуса (Obsidian Advanced Canvas)
**Файл:** `obsidian-advanced-canvas-main/src/canvas-extensions/focus-mode-canvas-extension.ts`

**Что делает:**
- При активации затемняет все узлы, кроме выбранных
- Упрощает визуальное восприятие важных узлов
- Переключатель в панели управления

**Применимость:** ✅ Средняя
- Похоже на нашу подсветку связанных узлов
- Можно добавить как отдельный режим "Focus Mode"
- Полезно для больших графов

**Реализация:**
- Добавить кнопку "Focus Mode"
- При активации: затемнить все узлы, кроме выбранных
- Можно комбинировать с поиском (фокус на найденных узлах)

---

### 4. Выбор рёбер по направлению (Obsidian Advanced Canvas)
**Файл:** `obsidian-advanced-canvas-main/src/canvas-extensions/edge-selection-canvas-extension.ts`

**Что делает:**
- При выборе узла предлагает выбрать:
  - Все связанные рёбра
  - Только исходящие рёбра
  - Только входящие рёбра
- Контекстное меню с опциями

**Применимость:** ✅ Средняя
- У нас уже есть контекстное меню
- Можно добавить опции для выделения рёбер
- Полезно для анализа связей

**Реализация:**
- Добавить в контекстное меню опции:
  - "Выделить входящие связи"
  - "Выделить исходящие связи"
  - "Выделить все связи"

---

### 5. Режим презентации (Obsidian Advanced Canvas)
**Файл:** `obsidian-advanced-canvas-main/src/canvas-extensions/presentation-canvas-extension.ts`

**Что делает:**
- Режим презентации с навигацией по узлам
- Клавиатурная навигация (стрелки, PageUp/PageDown)
- Анимация переходов между узлами
- Fullscreen режим
- Сохранение истории посещённых узлов

**Применимость:** ⚠️ Низкая (но интересная)
- Сложная реализация
- Может быть полезно для демонстраций
- Требует значительных изменений в UI

**Реализация:**
- Добавить кнопку "Режим презентации"
- При активации: fullscreen, навигация по рёбрам
- Клавиатурные шорткаты для навигации

---

### 6. Улучшенный экспорт (Obsidian Advanced Canvas)
**Файл:** `obsidian-advanced-canvas-main/src/canvas-extensions/export-canvas-extension.ts`

**Что делает:**
- Экспорт в PNG и SVG
- Настройка pixel ratio для качества
- Выбор темы (light/dark)
- Watermark опционально
- Privacy mode (затемнение текста)
- Прозрачный фон опционально
- Экспорт только выбранных узлов

**Применимость:** ✅ Высокая
- У нас уже есть базовый экспорт
- Можно значительно улучшить с настройками
- Модальное окно с опциями перед экспортом

**Реализация:**
- Добавить модальное окно с настройками экспорта
- Поддержка SVG экспорта
- Настройки качества, темы, watermark

---

### 7. Алгоритмы анализа графа (Graph Analysis)
**Файл:** `graph-analysis-master/src/MyGraph.ts`

**Что делает:**
- Jaccard similarity - похожесть узлов по общим соседям
- HITS algorithm - определение авторитетных узлов
- Co-Citations - анализ совместных цитирований
- Louvain - обнаружение сообществ
- Clustering Coefficient - коэффициент кластеризации

**Применимость:** ⚠️ Низкая (но интересная)
- Требует дополнительных библиотек
- Сложная реализация
- Может быть полезно для аналитики

**Реализация:**
- Добавить панель "Анализ графа"
- Показывать метрики для выбранного узла
- Визуализация сообществ через цвета

---

## Приоритетные рекомендации

### Высокий приоритет

1. **История навигации** ⭐⭐⭐
   - Простая реализация
   - Значительное улучшение UX
   - Работает с существующей системой

2. **Улучшенный экспорт** ⭐⭐⭐
   - У нас уже есть базовый экспорт
   - Легко расширить функциональность
   - Значительное улучшение для пользователей

3. **Мультиселект фильтры** ⭐⭐
   - Улучшение существующих фильтров
   - Лучший UX для множественного выбора

### Средний приоритет

4. **Режим фокуса** ⭐⭐
   - Дополняет подсветку связанных узлов
   - Полезно для больших графов

5. **Выбор рёбер по направлению** ⭐
   - Расширение контекстного меню
   - Полезно для анализа связей

### Низкий приоритет

6. **Режим презентации** ⭐
   - Сложная реализация
   - Нишевая функция

7. **Алгоритмы анализа** ⭐
   - Требует дополнительных библиотек
   - Сложная реализация
   - Для продвинутых пользователей

---

## Детали реализации

### История навигации

**Компоненты:**
- `NavigationHistory` класс для управления историей
- Кнопки "← Назад" и "→ Вперёд" в панели управления
- Сохранение истории в `localStorage` (опционально)

**Интеграция:**
- При клике на узел добавлять в историю
- При навигации назад/вперёд обновлять граф
- Обновлять состояние кнопок (disabled если нет истории)

### Улучшенный экспорт

**Модальное окно с настройками:**
- Формат: PNG / SVG
- Pixel ratio: слайдер 0.2 - 5.0
- Тема: Light / Dark
- Watermark: вкл/выкл
- Privacy mode: вкл/выкл (затемнение текста)
- Прозрачный фон: вкл/выкл (только PNG)

**Технические детали:**
- Использовать `html-to-image` для PNG
- Для SVG использовать `html-to-image` или прямой экспорт SVG
- Поддержка экспорта выбранных узлов (если есть selection)

### Мультиселект фильтры

**Компонент:**
- Использовать библиотеку для мультиселекта или создать свой
- Объединить фильтры по типу, тегам и типам связей
- Поиск внутри мультиселекта

**Фильтрация:**
- По типу узла (blog, cases, services, industries)
- По тегам (множественный выбор)
- По типу связи (explicit, outbound)

---

## Следующие шаги

1. Реализовать историю навигации (высокий приоритет)
2. Улучшить экспорт с настройками (высокий приоритет)
3. Добавить мультиселект фильтры (высокий приоритет)
4. Режим фокуса (средний приоритет)
5. Выбор рёбер по направлению (средний приоритет)
